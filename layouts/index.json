{{- $pages := where .Site.RegularPages "Type" "posts" -}}
{{- $pages = where $pages "Params.private" "ne" true -}}
[
{{- range $index, $page := $pages -}}
  {{- if $index -}},{{- end }}
  {
    "title": {{ $page.Title | jsonify }},
    "summary": {{ $page.Summary | jsonify }},
    "content": {{ $page.Plain | jsonify }},
    "permalink": {{ $page.Permalink | jsonify }},
    "date": {{ $page.Date.Format "2006-01-02" | jsonify }},
    "tags": [
      {{- range $tagIndex, $tag := $page.Params.tags -}}
        {{- if $tagIndex -}},{{- end -}}
        {{ $tag | jsonify }}
      {{- end -}}
    ]
  }
{{- end -}}
]