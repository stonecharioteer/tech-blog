<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
{{- if hugo.IsProduction | or (eq site.Params.env "production") | and (ne .Params.robotsNoIndex true) }}
<meta name="robots" content="index, follow">
{{- else }}
<meta name="robots" content="noindex, nofollow">
{{- end }}

{{- /* Title */}}
<title>{{ if .IsHome }}{{ else }}{{ if .Title }}{{ .Title }} | {{ end }}{{ end }}{{ site.Title }}</title>

{{- /* Meta */}}
{{- if .IsHome }}
{{ with site.Params.keywords -}}<meta name="keywords" content="{{- range $i, $e := . }}{{ if $i }}, {{ end }}{{ $e }}{{ end }}">{{ end }}
{{- else }}
<meta name="keywords" content="{{ if .Params.keywords -}}
    {{- range $i, $e := .Params.keywords }}{{ if $i }}, {{ end }}{{ $e }}{{ end }} {{- else }}
    {{- range $i, $e := .Params.tags }}{{ if $i }}, {{ end }}{{ $e }}{{ end }} {{- end -}}">
{{- end }}
<meta name="description" content="{{- with .Description }}{{ . }}{{- else }}{{- if or .IsPage .IsSection}}
    {{- .Summary | default (printf "%s - %s" .Title  site.Title) }}{{- else }}
    {{- with site.Params.description }}{{ . }}{{- end }}{{- end }}{{- end -}}">
<meta name="author" content="{{ (partial "author.html" . ) }}">
<link rel="canonical" href="{{ if .Params.canonicalURL -}} {{ trim .Params.canonicalURL " " }} {{- else -}} {{ .Permalink }} {{- end }}">
{{- if site.Params.analytics.google.SiteVerificationTag }}
<meta name="google-site-verification" content="{{ site.Params.analytics.google.SiteVerificationTag }}">
{{- end }}
{{- if site.Params.analytics.yandex.SiteVerificationTag }}
<meta name="yandex-verification" content="{{ site.Params.analytics.yandex.SiteVerificationTag }}">
{{- end }}
{{- if site.Params.analytics.bing.SiteVerificationTag }}
<meta name="msvalidate.01" content="{{ site.Params.analytics.bing.SiteVerificationTag }}">
{{- end }}
{{- if site.Params.analytics.naver.SiteVerificationTag }}
<meta name="naver-site-verification" content="{{ site.Params.analytics.naver.SiteVerificationTag }}">
{{- end }}

{{- /* Styles */}}

{{- /* includes */}}
{{- $includes := slice }}
{{- $includes = $includes | append (" " | resources.FromString "assets/css/includes-blank.css")}}

{{- if not (eq site.Params.assets.disableScrollBarStyle true) }}
    {{- $ScrollStyle := (resources.Get "css/includes/scroll-bar.css") }}
    {{- $includes = (append $ScrollStyle $includes) }}
{{- end }}

{{- $includes_all := $includes | resources.Concat "assets/css/includes.css" }}

{{- $theme_vars := (resources.Get "css/core/theme-vars.css") }}
{{- $reset := (resources.Get "css/core/reset.css") }}
{{- $media := (resources.Get "css/core/zmedia.css") }}
{{- $license_css := (resources.Get "css/core/license.css") }}
{{- $common := (resources.Match "css/common/*.css") | resources.Concat "assets/css/common.css" }}

{{- /* markup.highlight.noClasses should be set to `false` */}}
{{- $chroma_styles := (resources.Get "css/includes/chroma-styles.css") }}
{{- $chroma_mod := (resources.Get "css/includes/chroma-mod.css") }}

{{- /* order is important */}}
{{- $core := (slice $theme_vars $reset $common $chroma_styles $chroma_mod $includes_all $media) | resources.Concat "assets/css/core.css" | resources.Minify }}
{{- $extended := (resources.Match "css/extended/*.css") | resources.Concat "assets/css/extended.css" | resources.Minify }}

{{- /* bundle all required css */}}
{{- /* Add extended css after theme style */ -}}
{{- $stylesheet := (slice $license_css $core $extended) | resources.Concat "assets/css/stylesheet.css"  }}

{{- if not site.Params.assets.disableFingerprinting }}
{{- $stylesheet := $stylesheet | fingerprint }}
<link crossorigin="anonymous" href="{{ $stylesheet.RelPermalink }}" integrity="{{ $stylesheet.Data.Integrity }}" rel="preload stylesheet" as="style">
{{- else }}
<link crossorigin="anonymous" href="{{ $stylesheet.RelPermalink }}" rel="preload stylesheet" as="style">
{{- end }}

{{- /* Search */}}
{{- if (eq .Layout `search`) -}}
<link crossorigin="anonymous" rel="preload" as="fetch" href="../index.json">
{{- $fastsearch := resources.Get "js/fastsearch.js" | js.Build (dict "params" (dict "fuseOpts" site.Params.fuseOpts)) | resources.Minify }}
{{- $fusejs := resources.Get "js/fuse.basic.min.js" }}
{{- $license_js := resources.Get "js/license.js" }}
{{- if not site.Params.assets.disableFingerprinting }}
{{- $search := (slice $fusejs $license_js $fastsearch ) | resources.Concat "assets/js/search.js" | fingerprint }}
<script defer crossorigin="anonymous" src="{{ $search.RelPermalink }}" integrity="{{ $search.Data.Integrity }}"></script>
{{- else }}
{{- $search := (slice $fusejs $fastsearch ) | resources.Concat "assets/js/search.js" }}
<script defer crossorigin="anonymous" src="{{ $search.RelPermalink }}"></script>
{{- end }}
{{- end -}}

{{- /* Favicons */}}
<link rel="icon" href="{{ site.Params.assets.favicon | default "favicon.ico" | absURL }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ site.Params.assets.favicon16x16 | default "favicon-16x16.png" | absURL }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ site.Params.assets.favicon32x32 | default "favicon-32x32.png" | absURL }}">
<link rel="apple-touch-icon" href="{{ site.Params.assets.apple_touch_icon | default "apple-touch-icon.png" | absURL }}">
<link rel="mask-icon" href="{{ site.Params.assets.safari_pinned_tab | default "safari-pinned-tab.svg" | absURL }}">
<meta name="theme-color" content="{{ site.Params.assets.theme_color | default "#2e2e33" }}">
<meta name="msapplication-TileColor" content="{{ site.Params.assets.msapplication_TileColor | default "#2e2e33" }}">

{{- /* RSS */}}
{{ range .AlternativeOutputFormats -}}
<link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ .Permalink | safeURL }}">
{{ end -}}
{{- range .AllTranslations -}}
<link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
{{ end -}}

<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    {{- if (and (ne site.Params.defaultTheme "light") (ne site.Params.defaultTheme "dark")) }}
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
    {{- end }}
</noscript>

<style>
    .admonition {
        margin: 1.5rem 0;
        border-left: 4px solid;
        border-radius: 0.25rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .admonition-title {
        position: relative;
        padding: 0.75rem 1rem 0.75rem 5rem;
        min-height: 4.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
    }

    .admonition-title::before {
        content: "";
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        width: 60px;
        height: 60px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
    }

    .admonition-content {
        padding: 0 1rem 1rem;
    }

    .admonition-content p:last-child {
        margin-bottom: 0;
    }

    /* Note - plain_1.png */
    .admonition.note {
        border-left-color: #3b82f6;
        background-color: #eff6ff;
    }

    .admonition.note .admonition-title {
        background-color: #dbeafe;
        color: #1e40af;
    }

    .admonition.note .admonition-title::before {
        background-image: url('/sprites/plain_1.png');
    }

    /* Info - smile_bashful_1.png */
    .admonition.info {
        border-left-color: #06b6d4;
        background-color: #ecfeff;
    }

    .admonition.info .admonition-title {
        background-color: #cffafe;
        color: #0e7490;
    }

    .admonition.info .admonition-title::before {
        background-image: url('/sprites/smile_bashful_1.png');
    }

    /* Warning - yell_angry.png */
    .admonition.warning {
        border-left-color: #f59e0b;
        background-color: #fffbeb;
    }

    .admonition.warning .admonition-title {
        background-color: #fef3c7;
        color: #92400e;
    }

    .admonition.warning .admonition-title::before {
        background-image: url('/sprites/yell_angry.png');
    }

    /* Tip - happy_1.png */
    .admonition.tip {
        border-left-color: #10b981;
        background-color: #ecfdf5;
    }

    .admonition.tip .admonition-title {
        background-color: #d1fae5;
        color: #065f46;
    }

    .admonition.tip .admonition-title::before {
        background-image: url('/sprites/happy_1.png');
    }

    /* Quote - love_1.png */
    .admonition.quote {
        border-left-color: #6b7280;
        background-color: #f9fafb;
    }

    .admonition.quote .admonition-title {
        background-color: #f3f4f6;
        color: #374151;
    }

    .admonition.quote .admonition-title::before {
        background-image: url('/sprites/love_1.png');
    }

    .admonition.quote .admonition-content {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-style: italic;
        line-height: 1.6;
    }

    .admonition-quote-footer {
        margin-top: 1rem;
        text-align: right;
        font-style: normal;
        font-weight: 500;
        font-size: 0.9em;
        opacity: 0.8;
    }

    /* Example - smile_wicked_1.png */
    .admonition.example {
        border-left-color: #8b5cf6;
        background-color: #f5f3ff;
    }

    .admonition.example .admonition-title {
        background-color: #ede9fe;
        color: #5b21b6;
    }

    .admonition.example .admonition-title::before {
        background-image: url('/sprites/smile_wicked_1.png');
    }

    /* AI - cyborg_1.png */
    .admonition.ai {
        border-left-color: #f97316;
        background-color: #fff7ed;
    }

    .admonition.ai .admonition-title {
        background-color: #fed7aa;
        color: #c2410c;
    }

    .admonition.ai .admonition-title::before {
        background-image: url('/sprites/cyborg_1.png');
    }

    /* Dark mode styles */
    .dark .admonition.note {
        background-color: #1e3a8a;
        border-left-color: #60a5fa;
    }

    .dark .admonition.note .admonition-title {
        background-color: #1e40af;
        color: #bfdbfe;
    }

    .dark .admonition.note .admonition-content {
        color: #e0e7ff;
    }

    .dark .admonition.info {
        background-color: #164e63;
        border-left-color: #22d3ee;
    }

    .dark .admonition.info .admonition-title {
        background-color: #0e7490;
        color: #a5f3fc;
    }

    .dark .admonition.info .admonition-content {
        color: #cffafe;
    }

    .dark .admonition.warning {
        background-color: #92400e;
        border-left-color: #fbbf24;
    }

    .dark .admonition.warning .admonition-title {
        background-color: #b45309;
        color: #fde68a;
    }

    .dark .admonition.warning .admonition-content {
        color: #fef3c7;
    }

    .dark .admonition.tip {
        background-color: #064e3b;
        border-left-color: #34d399;
    }

    .dark .admonition.tip .admonition-title {
        background-color: #065f46;
        color: #a7f3d0;
    }

    .dark .admonition.tip .admonition-content {
        color: #d1fae5;
    }

    .dark .admonition.quote {
        background-color: #374151;
        border-left-color: #9ca3af;
    }

    .dark .admonition.quote .admonition-title {
        background-color: #4b5563;
        color: #d1d5db;
    }

    .dark .admonition.quote .admonition-content {
        color: #f3f4f6;
    }

    .dark .admonition-quote-footer {
        color: #d1d5db;
    }

    .dark .admonition.example {
        background-color: #581c87;
        border-left-color: #a78bfa;
    }

    .dark .admonition.example .admonition-title {
        background-color: #6b21a8;
        color: #c4b5fd;
    }

    .dark .admonition.example .admonition-content {
        color: #e9d5ff;
    }

    .dark .admonition.ai {
        background-color: #7c2d12;
        border-left-color: #fb923c;
    }

    .dark .admonition.ai .admonition-title {
        background-color: #9a3412;
        color: #fed7aa;
    }

    .dark .admonition.ai .admonition-content {
        color: #ffedd5;
    }

    /* Responsive: smaller sprites on mobile */
    @media (max-width: 480px) {
        .admonition-title {
            padding-left: 4rem;
            min-height: 3.5rem;
        }

        .admonition-title::before {
            width: 45px;
            height: 45px;
            left: 0.5rem;
        }
    }
    
    /* REMOVED DUPLICATE LINE NUMBER RULES */
    
    /* CHROMA SYNTAX HIGHLIGHTING FIX - HIGHEST PRIORITY */
    /* Light mode code blocks - target ALL possible containers */
    .chroma,
    .highlight,
    .highlight .chroma,
    div.highlight,
    div.highlight .chroma,
    pre.chroma,
    .highlight pre.chroma,
    .highlight pre,
    pre,
    .lntable,
    .lntd,
    .lntd pre,
    .lntd pre.chroma,
    .highlight .lntable,
    .highlight .lntd,
    .highlight .lntd pre,
    .highlight .lntd pre.chroma,
    div.highlight .lntable,
    div.highlight .lntd,
    div.highlight .lntd pre,
    div.highlight .lntd pre.chroma {
        background-color: #f6f8fa !important;
        color: #24292e !important;
    }
    
    /* Dark mode code blocks - target ALL possible containers */
    .dark .chroma,
    .dark .highlight,
    .dark .highlight .chroma,
    .dark div.highlight,
    .dark div.highlight .chroma,
    .dark pre.chroma,
    .dark .highlight pre.chroma,
    .dark .highlight pre,
    .dark pre,
    .dark .lntable,
    .dark .lntd,
    .dark .lntd pre,
    .dark .lntd pre.chroma,
    .dark .highlight .lntable,
    .dark .highlight .lntd,
    .dark .highlight .lntd pre,
    .dark .highlight .lntd pre.chroma,
    .dark div.highlight .lntable,
    .dark div.highlight .lntd,
    .dark div.highlight .lntd pre,
    .dark div.highlight .lntd pre.chroma {
        background-color: #24273a !important;
        color: #cad3f5 !important;
    }
    
    /* Media query fallback - target ALL possible containers */
    @media (prefers-color-scheme: dark) {
        body:not(.light) .chroma,
        body:not(.light) .highlight,
        body:not(.light) .highlight .chroma,
        body:not(.light) div.highlight,
        body:not(.light) div.highlight .chroma,
        body:not(.light) pre.chroma,
        body:not(.light) .highlight pre.chroma,
        body:not(.light) .highlight pre,
        body:not(.light) pre,
        body:not(.light) .lntable,
        body:not(.light) .lntd,
        body:not(.light) .lntd pre,
        body:not(.light) .lntd pre.chroma,
        body:not(.light) .highlight .lntable,
        body:not(.light) .highlight .lntd,
        body:not(.light) .highlight .lntd pre,
        body:not(.light) .highlight .lntd pre.chroma,
        body:not(.light) div.highlight .lntable,
        body:not(.light) div.highlight .lntd,
        body:not(.light) div.highlight .lntd pre,
        body:not(.light) div.highlight .lntd pre.chroma {
            background-color: #24273a !important;
            color: #cad3f5 !important;
        }
    }
    
    /* WORKING SOLUTION - Use attribute selectors for maximum coverage */
    /* Extra specific for light mode */
    body:not(.dark) [class*="chroma"],
    body:not(.dark) [class*="highlight"],
    body:not(.dark) [class*="lnt"],
    body:not(.dark) pre,
    body:not(.dark) code,
    [class*="chroma"],
    [class*="highlight"],
    [class*="lnt"],
    pre,
    code {
        background-color: #f6f8fa !important;
        color: #24292e !important;
    }
    
    .dark [class*="chroma"],
    .dark [class*="highlight"], 
    .dark [class*="lnt"],
    .dark pre,
    .dark code {
        background-color: #24273a !important;
        color: #cad3f5 !important;
    }
    
    /* Media query fallback */
    @media (prefers-color-scheme: dark) {
        body:not(.light) [class*="chroma"],
        body:not(.light) [class*="highlight"],
        body:not(.light) [class*="lnt"],
        body:not(.light) pre,
        body:not(.light) code {
            background-color: #24273a !important;
            color: #cad3f5 !important;
        }
    }
    
    /* FINAL OVERRIDE - Ensure light mode works with better contrast */
    body:not(.dark) [class*="chroma"],
    body:not(.dark) [class*="highlight"],
    body:not(.dark) pre,
    body:not(.dark) code {
        background-color: #f8f9fa !important;
        color: #1a1a1a !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
        border-radius: 0 !important; /* Remove rounded corners to eliminate black corner issue */
    }
    
    /* Light mode line numbers - match dark mode behavior exactly */
    body:not(.dark) [class*="lnt"],
    body:not(.dark) [class*="ln"] {
        background-color: #f8f9fa !important;
        color: #6c757d !important;
        border-radius: 0 !important;
    }
    
    /* Remove ALL borders and outlines from light mode code elements */
    body:not(.dark) .highlight,
    body:not(.dark) .highlight > div,
    body:not(.dark) .lntable,
    body:not(.dark) .lntd {
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
    }
    
    /* Enhanced syntax colors for light mode - maximum contrast */
    body:not(.dark) .chroma .k,
    body:not(.dark) .chroma .kd,
    body:not(.dark) .chroma .kn,
    body:not(.dark) .chroma .kp,
    body:not(.dark) .chroma .kr,
    body:not(.dark) .chroma .kt { color: #d01040 !important; font-weight: 600 !important; } /* Keywords - bold red */
    
    body:not(.dark) .chroma .s,
    body:not(.dark) .chroma .s1,
    body:not(.dark) .chroma .s2,
    body:not(.dark) .chroma .sb,
    body:not(.dark) .chroma .sc { color: #003d99 !important; } /* Strings - much darker blue */
    
    body:not(.dark) .chroma .nf,
    body:not(.dark) .chroma .fm { color: #6610f2 !important; font-weight: 500 !important; } /* Functions - bold purple */
    
    body:not(.dark) .chroma .c,
    body:not(.dark) .chroma .c1,
    body:not(.dark) .chroma .cm { color: #198754 !important; font-style: italic !important; } /* Comments - green italic */
    
    body:not(.dark) .chroma .m,
    body:not(.dark) .chroma .mi,
    body:not(.dark) .chroma .mf { color: #fd7e14 !important; } /* Numbers - orange */
    
    body:not(.dark) .chroma .ln,
    body:not(.dark) .chroma .lnt { color: #adb5bd !important; } /* Line numbers - gray */
    
    body:not(.dark) .chroma .p { color: #495057 !important; } /* Punctuation - dark gray */
    
    /* Fix specific problematic elements */
    body:not(.dark) .chroma .nc,
    body:not(.dark) .chroma .no { color: #d63384 !important; font-weight: 600 !important; } /* Types like "Package" - magenta */
    
    body:not(.dark) .chroma .nt { color: #003d99 !important; font-weight: 600 !important; } /* Type hints like "String" - much darker blue */
    
    body:not(.dark) .chroma .na,
    body:not(.dark) .chroma .nx { color: #1a1a1a !important; } /* Attributes and names - black */
    
    /* Target self/&self parameters and other variable references */
    body:not(.dark) .chroma .nv,
    body:not(.dark) .chroma .vc,
    body:not(.dark) .chroma .vg,
    body:not(.dark) .chroma .vi,
    body:not(.dark) .chroma .vm { color: #003d99 !important; font-weight: 500 !important; } /* Variables like self/&self - dark blue */
    
    /* AGGRESSIVE OVERRIDE - catch any remaining light blue elements */
    body:not(.dark) .chroma .nb,
    body:not(.dark) .chroma .bp,
    body:not(.dark) .chroma .nd,
    body:not(.dark) .chroma .nn { color: #003d99 !important; font-weight: 500 !important; } /* Built-ins, decorators, namespaces - dark blue */
    
    /* Final catchall for any elements that might still be light blue */
    body:not(.dark) .chroma [style*="color:#8aadf4"],
    body:not(.dark) .chroma [style*="color:#91d7e3"] { color: #003d99 !important; }

    /* Simple dotted underline for all links */
    a {
        text-decoration: underline;
        text-decoration-style: dotted;
        text-underline-offset: 3px;
    }

    a:hover {
        text-decoration-style: solid;
    }

    /* Numbered pagination styling */
    .pagination {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin: 2rem 0;
    }

    .page-numbers {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .page-numbers a,
    .page-numbers span.current {
        display: inline-block;
        padding: 0.5rem 0.75rem;
        text-decoration: none;
        border: 1px solid var(--border);
        border-radius: 4px;
        min-width: 2.5rem;
        text-align: center;
        transition: all 0.2s ease;
    }

    .page-numbers a:hover {
        background-color: var(--theme);
        color: var(--main);
        border-color: var(--theme);
    }

    .page-numbers span.current {
        background-color: var(--theme);
        color: var(--main);
        border-color: var(--theme);
        font-weight: bold;
    }

    .page-numbers span.dots {
        padding: 0.5rem 0.25rem;
        color: var(--secondary);
    }

    .pagination-info {
        font-size: 0.9rem;
        color: var(--secondary);
        text-align: center;
        margin-top: 1rem;
        padding: 0.5rem;
        background-color: var(--code-bg);
        border-radius: 4px;
    }

    /* Tag filtering dropdown */
    .tag-filter-dropdown {
        margin: 1.5rem 0;
        padding: 0.75rem 1rem;
        background-color: var(--code-bg);
        border-radius: 6px;
        border: 1px solid var(--border);
    }

    .filter-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
    }

    .filter-label {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--primary);
    }

    .filter-stats {
        font-size: 0.8rem;
        color: var(--secondary);
    }

    .tag-dropdown {
        width: 100%;
        max-width: 300px;
        padding: 0.5rem;
        font-size: 0.9rem;
        background-color: var(--theme);
        color: var(--primary);
        border: 1px solid var(--border);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .tag-dropdown:hover {
        border-color: var(--primary);
    }

    .tag-dropdown:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
    }

    /* Dark mode dropdown support */
    .dark .tag-dropdown {
        background-color: var(--entry);
        color: var(--primary);
    }

    /* Tags overview page */
    .tags-overview {
        margin: 2rem 0;
    }

    .tags-stats {
        margin-bottom: 2rem;
        padding: 1rem;
        background-color: var(--code-bg);
        border-radius: 6px;
        border: 1px solid var(--border);
        text-align: center;
    }

    .tags-stats p {
        margin: 0.5rem 0;
        color: var(--secondary);
    }

    .tags-stats strong {
        color: var(--primary);
    }

    .tags-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
    }

    .tag-card {
        background-color: var(--code-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.2s ease;
    }

    .tag-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-color: var(--primary);
    }

    .tag-link {
        display: block;
        padding: 1rem;
        text-decoration: none;
        color: inherit;
    }

    .tag-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
    }

    .tag-name {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primary);
    }

    .tag-count {
        font-size: 0.85rem;
        color: var(--secondary);
        background-color: var(--theme);
        padding: 0.2rem 0.5rem;
        border-radius: 12px;
        border: 1px solid var(--border);
    }

    .tag-preview {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .preview-post {
        font-size: 0.8rem;
        color: var(--secondary);
        line-height: 1.3;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .more-posts {
        font-size: 0.75rem;
        color: var(--secondary);
        font-style: italic;
        opacity: 0.7;
    }

    /* Dark mode for tags page */
    .dark .tag-card:hover {
        box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .pagination {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .page-numbers {
            justify-content: center;
        }
        
        .tag-filter-dropdown {
            margin: 1rem 0;
            padding: 0.5rem 0.75rem;
        }
        
        .filter-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
        }
        
        .tag-dropdown {
            max-width: 100%;
            font-size: 0.85rem;
        }
        
        .tags-grid {
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }
        
        .tag-card {
            margin-bottom: 0.5rem;
        }
        
        .tag-info {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
        
        .pagination-info {
            font-size: 0.8rem;
        }
    }

    /* TIL Post Styling */
    .til-post {
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        border-left: 4px solid #0ea5e9;
        position: relative;
    }

    .til-post::before {
        content: "ðŸ“š TIL";
        position: absolute;
        top: 0.5rem;
        right: 0.75rem;
        background: #0ea5e9;
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.025em;
        z-index: 1;
    }

    .til-post:hover {
        background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
        box-shadow: 0 4px 6px -1px rgba(14, 165, 233, 0.1), 0 2px 4px -1px rgba(14, 165, 233, 0.06);
        transform: translateY(-1px);
        transition: all 0.2s ease-in-out;
    }

    /* Dark mode TIL styling */
    .dark .til-post {
        background: linear-gradient(135deg, #0c1929 0%, #1e293b 100%);
        border-left-color: #38bdf8;
    }

    .dark .til-post::before {
        background: #38bdf8;
        color: #0f172a;
    }

    .dark .til-post:hover {
        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        box-shadow: 0 4px 6px -1px rgba(56, 189, 248, 0.2), 0 2px 4px -1px rgba(56, 189, 248, 0.1);
    }

    /* Ensure TIL badge doesn't overlap with content */
    .til-post .entry-header {
        margin-right: 4rem;
    }

    @media (max-width: 768px) {
        .til-post::before {
            position: static;
            display: inline-block;
            margin-bottom: 0.5rem;
            margin-left: 0;
        }
        
        .til-post .entry-header {
            margin-right: 0;
        }
    }
    
    /* FINAL LINE NUMBER FIX - REVERT TO WORKING VERSION */
    .lntd:first-child,
    .lntd:first-child *,
    .lntable .lntd:first-child,
    .lntable .lntd:first-child *,
    .lnt,
    .ln,
    span.lnt,
    span.ln,
    td.lnt,
    td.ln,
    .chroma .lnt,
    .chroma .ln,
    .highlight .lnt,
    .highlight .ln,
    body:not(.dark) .lnt,
    body:not(.dark) .ln,
    body:not(.dark) [class*="lnt"],
    body:not(.dark) [class*="ln"] {
        border-radius: 0 !important;
        border-top-left-radius: 0 !important;
        border-top-right-radius: 0 !important;
        border-bottom-left-radius: 0 !important;
        border-bottom-right-radius: 0 !important;
        border: none !important;
        outline: none !important;
    }
    
    /* FIX BLACK CORNERS ON CODE BLOCK CONTAINER - COMPREHENSIVE */
    .highlight,
    .chroma,
    div.highlight,
    .lntable,
    .highlight .lntable,
    .chroma .lntable,
    .highlight > div,
    .chroma > div,
    body:not(.dark) .highlight,
    body:not(.dark) .chroma,
    body:not(.dark) div.highlight,
    body:not(.dark) .lntable,
    body:not(.dark) .highlight .lntable,
    body:not(.dark) .chroma .lntable,
    body:not(.dark) .highlight > div,
    body:not(.dark) .chroma > div {
        background-color: #f8f9fa !important;
        background: #f8f9fa !important;
    }

    /* LINE HIGHLIGHTING - Light mode */
    body:not(.dark) .chroma .hl,
    body:not(.dark) .highlight .hl {
        background-color: #fff3cd !important;
        display: block;
        width: 100%;
    }

    /* LINE HIGHLIGHTING - Dark mode */
    .dark .chroma .hl,
    .dark .highlight .hl {
        background-color: #3d3d00 !important;
        display: block;
        width: 100%;
    }

    /* Media query fallback for line highlighting */
    @media (prefers-color-scheme: dark) {
        body:not(.light) .chroma .hl,
        body:not(.light) .highlight .hl {
            background-color: #3d3d00 !important;
        }
    }

    /* Newsletter / Picoletter Form Styling */
    .newsletter-container {
        margin: 3rem auto 2rem;
        padding: 2rem;
        max-width: 600px;
        background-color: var(--code-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
    }

    .newsletter-heading {
        margin: 0 0 0.5rem 0;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary);
        text-align: center;
    }

    .newsletter-description {
        margin: 0 0 1.5rem 0;
        font-size: 0.95rem;
        color: var(--secondary);
        text-align: center;
    }

    .picoletter-form-embed {
        display: flex;
        flex-direction: column;
        font-family: SF Pro Display, -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;
    }

    .picoletter-form-embed label {
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--primary);
    }

    .picoletter-form-embed input[type="text"],
    .picoletter-form-embed input[type="email"] {
        padding: 0.65rem;
        margin-bottom: 1rem;
        border: 1px solid var(--border);
        border-radius: 0.4rem;
        background-color: var(--theme);
        color: var(--primary);
        font-size: 0.9rem;
        transition: all 0.2s ease;
    }

    .picoletter-form-embed input[type="text"]:focus,
    .picoletter-form-embed input[type="email"]:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.1);
    }

    .picoletter-form-embed input[type="submit"] {
        border: 1px solid var(--primary);
        background-color: var(--primary);
        color: var(--theme);
        padding: 0.65rem 0.9rem;
        font-size: 0.95rem;
        font-weight: 600;
        text-decoration: none;
        line-height: normal;
        margin-bottom: 0.75rem;
        border-radius: 0.4rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .picoletter-form-embed input[type="submit"]:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .picoletter-attribution {
        margin-block-start: 0;
        margin-block-end: 0;
        font-size: 0.75rem;
        color: var(--secondary);
        text-align: center;
    }

    .picoletter-attribution a {
        color: var(--secondary);
        text-decoration: none;
    }

    .picoletter-attribution a:hover {
        color: var(--primary);
        text-decoration: underline;
    }

    /* Dark mode newsletter styling */
    .dark .newsletter-container {
        background-color: var(--entry);
    }

    .dark .picoletter-form-embed input[type="text"],
    .dark .picoletter-form-embed input[type="email"] {
        background-color: var(--theme);
        border-color: var(--border);
    }

    .dark .picoletter-form-embed input[type="submit"] {
        background-color: var(--primary);
        color: var(--theme);
    }

    /* Responsive newsletter */
    @media (max-width: 768px) {
        .newsletter-container {
            margin: 2rem 1rem 1rem;
            padding: 1.5rem 1rem;
        }

        .newsletter-heading {
            font-size: 1.25rem;
        }

        .newsletter-description {
            font-size: 0.9rem;
        }
    }
</style>

{{- partial "extend_head.html" . -}}

{{- /* Misc */}}
{{- if hugo.IsProduction | or (eq site.Params.env "production") }}
{{- partial "google_analytics.html" . }}
{{- partial "templates/opengraph.html" . }}
{{- partial "templates/twitter_cards.html" . }}
{{- partial "templates/schema_json.html" . }}
{{- end -}}
{{ if .Params.private }}
<meta name="robots" content="noindex, nofollow">
{{ end }}
